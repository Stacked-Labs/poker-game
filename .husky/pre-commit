#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "Running pre-commit hook..."
cd "$(git rev-parse --show-toplevel)" # Navigate to project root
echo "Current directory: $(pwd)"

# Only run lint in CI/sandboxed environments where network access is restricted
if [ -n "$CI" ] || [ ! -z "$GITHUB_ACTIONS" ]; then
    echo "CI environment detected, skipping build step"
    npm run lint
else
    npm run lint && npm run build
fi
